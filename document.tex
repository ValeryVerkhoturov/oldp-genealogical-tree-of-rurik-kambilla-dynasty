% !TeX spellcheck = russian-aot
% !TeX program = lualatex

\documentclass{article}

\usepackage[a0paper, landscape, top=10mm, bottom=10mm, left=10mm, right=10mm]{geometry}

\usepackage{fontspec}
\setmainfont{CMU Serif}
\usepackage[english, main=russian]{babel}

\usepackage[all]{genealogytree}
\usepackage{adjustbox}
\usepackage{tcolorbox}

% david --- lime
% oleg --- violet
% ryazanmurom --- cyan
% izyaslaw --- olive
% starodub --- green
% smolensk --- lightgray
% rostovbelozersk --- teal
% suzdal --- blue
% tver --- brown
% paleolog --- orange
% kambilla --- pink
% polovetsk --- purple

\begin{document}
\pagestyle{empty}

\begin{center}
\vspace*{\fill}
\begin{adjustbox}{width=\textwidth}
\begin{tikzpicture}
	\gtrset{template=signpost,
		edges={anchoring=center},
		saint/.style={box={colback=yellow,no shadow,fuzzy halo}},
		mainfull/.style={pivot,box={colback=red!50, colframe=red}},
		main/.style={box={colframe=red}},
		box={colback=white,boxrule=4pt},
	}

	\genealogytree[id suffix=@p]{
		child[subtree box={colframe=red}]{
			g[mainfull]{Рюрик}
			child{
				g[mainfull]{Игорь}
				p[saint, main]{Ольга}
				child{
					g[mainfull]{Святослав}
					child{
						g[saint, mainfull]{Владимир Великий}
						child{
							g[box={colback=purple!50}]{Изяслав}
							child[subtree box={colframe=purple}]{
								g{Брячеслав \\(Полоцк)}
								child{
									g{Всеслав}
									child{
										g{Глеб}
										child{
											g{Ростислав}
											child{
												g{Глеб}
											}
										}
									}
								}
							}
						}
						child{
							g[mainfull]{Ярослав}
							child{
								g[mainfull]{Всеволод}
								child{
									g[mainfull]{Владимир Всеволодович Манамах}
									child{
										g[box={colback=lightgray!50}]{Смоленский Мстислав}
										child[subtree box={colframe=lightgray}]{
											g[saint]{Всеволод}
											c{Иван}
										}
										child[subtree box={colframe=lightgray}]{
											g{Изяслав}
											c{Ярополк}
											c{Владимир}
											child{
												g{Ярослав}
												child{
													g{Ингвар}
													c{Изяслав}
												}
											}
											child{
												g{Мстислав}
												child{
													g{Роман}
													c{Даниил}	
												}
												c{Святослав}
											}
										}
										child[subtree box={colframe=lightgray}]{
											g{Смоленский Ростислав}
											c{Бердладник Иванко}
											child{
												g{Мстислав}
												c{Святослав}
												child{
													g{Мстислав}
													c{Василий}	
												}
											}
											child{
												g{Роман}
												child{
													g{Мстислав}
													c{Святослав}
													c{Всеволод}
													c{Изяслав}
												}
												c{Ярополк}
											}
											c{Святослав}
											child{
												g{Давыд}
												child{
													g{Мстислав}
													child{
														g{Ростислав}
														child{
															g{Глеб}
															c{Роман}
															child{
																g{Александр}
																c{Василий}
																child{
																	g{Иван}
																	child{
																		g{Святослав}
																		c{Глеб}
																		child{
																			g{Юрий}
																			c{Феодор}
																		}
																		c{Владимир}
																	}
																	child{
																		g{Василий}	
																		child{
																			g{Иван}
																			child{
																				g{Василий}	
																			}
																		}
																	}
																}
															}
															child{
																g{Святослав}
																c{Глеб}
																c{Феодор}
															}
														}
														child{
															g{Михаил}
															c{Юрий}
														}
														child{
															g[saint]{Феодор}
															child{
																g[saint]{Давыд}
																child{
																	g{Василий}
																	child{
																		g{Михаил}
																		c{Феодор}
																		c{Роман}
																	}
																	child{
																		g{Василий}	
																		c{Иван}
																	}
																	c{Роман}
																}
															}
															c[saint]{Константин}
														}
													}
												}
												c{Константин}
											}
											child{
												g{Рюрик}
												c{Ростислав}
												c{Владимир}	
											}
											c{Ярополк}
										}
										c[box={colframe=lightgray}]{Святополк}
										child[subtree box={colframe=lightgray}]{
											g{Владимир}
											child{
												g{Ярослав}
												c{Изяслав}
												c{Ростислав}
											}	
										}
										c[box={colframe=lightgray}]{Ярослав}
									}
									c{Изяслав}
									child{
										g{Святослав}
										c{Василек}	
									}
									child{
										g{Ярополк}
										c{Изяслав}	
									}
									c{Вячеслав}
									c{Роман}
									child{
										g[mainfull]{Юрий Владимирович Долгорукий}
										c{Иванко}
										child{
											g{Ростислав}
											c{Ярополк}
											child{
												g{Мстислав}
												c{Ярослав}
											}
										}
										child{
											g{Андрей Боголюбский}
											c{Изяслав}
											child{
												g{Мстислав}
												c{Василий}	
											}
											c{Юрий}
										}
										c{Борис}
										child{
											g{Глеб}
											c{Владимир}
											c{Изяслав}	
										}
										child{
											g{Мстислав}
											c{Ярослав}	
										}
										c{Василько}
										c{Ярослав}
										c{Михалко}
										c{Святослав}
										child{
											g[mainfull]{Всеволод Юрьевич}
											c{Владимир}
											child{
												g{Константин}
												child{
													g[saint, box={colback=teal!50}]{Василий}
													child[subtree box={colframe=teal}]{
														g{Глеб}
														child{
															g{Михаил}
															child{
																g{Романчук}
																child{
																	g{Феодор}
																	c{Иван}
																}
																child{
																	g{Иван}
																	child{
																		g{Василий}
																		c{Константин}
																	}	
																}
															}
														}
													}
													child[subtree box={colframe=teal}]{
														g{Борис}
														child{
															g{Дмитрий}
															child{
																g{Александр}	
																c{Юрий}
															}
														}
														child{
															g{Константин}
															c{Михаил}
															child{
																g{Василий}
																child{
																	g{Феодор}
																	c{Андрей}
																}
															}
															c{Александр}
														}
														c{Василий}
													}
												}
												child{
													g{Всеволод}
													c{Василий}	
												}
												child{
													g{Владимир}
													c{Андрей}
													c{Роман}
												}
											}
											c{Борис}
											child{
												g{Юрий}
												c{Всеволод}
												c{Мстислав}
												c{Владимир}
											}
											c{Феодор}
											c{Дмитрий}
											c{Гавриил}
											child{
												g[mainfull]{Ярослав Всеволодович}
												c{Феодор}
												child{
													g[saint, mainfull]{Александр Ярославович Невский}
													c{Василий}
													child{
														g[saint]{Дмитрий}
														c{Александр}
														c{Иван}
														c{Иван}
													}
													child{
														g{Андрей}
														c{Борис}
														c{Михаил}
													}
													child{
														g[mainfull]{Данило Александрович}
														c{Юрий}
														c{Александр}
														c{Борис}
														child{
															g[mainfull]{Иван Данилович Калита}	
															child{
																g{Семен}
																c{Василий}
																c{Константин}
																c{Даниил}
																c{Михаил}
																c{Иван}
																c{Семен}
															}
															c{Данила}
															child{
																g[mainfull]{Иван Иванович}
																child{
																	g[saint, mainfull]{Донской Дмитрий Иванович}
																	p[id=Evdokia, box={colframe=blue, colback=blue!50}]{Евдокия}
																	child{
																		g[mainfull]{Василий Дмитриевич}
																		c{Анна \\(жена Ивана Колуяна)}
																		c{Юрий}
																		child{
																			g[mainfull]{Василий Васильевич}
																			c{Юрий}
																			child{
																				g[mainfull]{Иван~III Васильевич}
																				p[box={colback=brown!50, colframe=brown}]{Мария Борисовна}
																				child{
																					g{Иван Иванович}
																					c{Дмитрий Иванович}
																				}
																				union{
																					p[id=Sophia, box={colback=orange!50, colframe=orange}]{Софья Палеолог}
																					child{
																						g[mainfull]{Василий Иванович}
																						child{
																							g[mainfull]{Царь Иван~IV Васильевич}
																							p[id=Anastasia, box={colback=pink!50, colframe=pink}]{Анастасия Романова}
																							c{Дмитрий}
																							c{Иван}
																							child{
																								g[mainfull]{Царь Феодор}
																								p[id=Irina]{Ирина \\ (жена Феодора)}
																							}
																							c[phantom]{}
																							union{
																								p[box={colframe=black}]{Мария Нагая}
																								child{
																									g[mainfull]{Царь Дмитрий}
																									c{Иван (повешен по~указанию правительства)}
																								}
																							}
																						}
																						child{
																							g{Юрий}
																							c{Василий}
																						}
																					}
																					c{Юрий}
																					c{Дмитрий}
																					c{Семен}
																					c{Иван}
																					child{
																						g{Андрей}
																						c{Владимир}
																					}
																				}
																			}
																			c{Юрий}
																			child{
																				g{Андрей}
																				c{Дмитрий}
																				c{Иван}
																			}
																			c{Борис}
																			child{
																				g{Андрей}
																				c{Феодор}
																				c{Иван}
																			}
																		}
																	}
																	child{
																		g{Юрий}
																		c{Василий}
																		c{Дмитрий}
																		child{
																			g{Дмитрий}
																			child{
																				g{Иван}
																				c{Василий}	
																			}
																		}
																	}
																	c{Даниил}
																	child{
																		g{Андрей}
																		child{
																			g{Иван}	
																			c{василий}
																		}
																		child{
																			g{Михаил}
																			c{Семен}
																		}
																	}
																	c{Петр}
																	c{Иван}
																	c{Константин}
																}
																c{Иван}
															}
															child{
																g{Андрей}
																child{
																	g{Владимир}
																	c{Иван}
																	child{
																		g{Ярослав}
																		child{
																			g{Василий}
																			c{Иван}
																		}
																	}
																	c{Феодор}
																	c{Василий}
																	c{Андрей}
																}
																c{Иван}
															}
															c{Семен}
														}
														c{Афанасий}
													}
												}
												child{
													g[box={colback=blue!50}]{Андрей}
													c[box={colframe=blue}]{Юрий}
													child[subtree box={colframe=blue}]{
														g{Михаил}
														child{
															g{Василий}
															child{
																g{Константин}
																child{
																	g{Дмитрий}
																	c{Семен}
																	child{
																		g{Василий}	
																		c{Иван}
																		child{
																			g{Юрий}
																			child{
																				g{Василий}
																				child{
																					g{Михаил}
																					child{
																						g{Андрей}
																						child{
																							g{Иван}	
																							child{
																								g{Царь Василий Шуйский}	
																							}
																						}
																					}
																					c{Иван}
																				}
																				
																			}
																			child{
																				g{Феодор}
																				child{
																					g{Василий}
																					child{
																						g{Василий}
																						child{
																							g{Иван}
																							child{
																								g{Петр Феодор}	
																							}
																						}
																					}
																				}
																			}
																		}
																	}
																	c{Иван}
																	c[id=Evdokia, saint]{Евдокия}
																}
																c{Андрей}
																child{
																	g{Борис}
																	c{Иван}
																	c{Даниил}
																}
															}
															c{Александр}
														}	
													}	
												}
												child{
													g{Константин}
													child{
														g{Давыд}
														child{
															g{Борис}	
														}
													}
												}
												c{Афанасий}
												c{Даниил}
												c{Хоробрит Михаил}
												child{
													g[box={colback=brown!50}]{Ярослав}
													c[box={colframe=brown}]{Святослав}
													child[subtree box={colframe=brown}]{
														g[saint]{Михаил}
														c{Дмитрий}
														child{
															g{Александр}
															child{
																g{Всеволод}
																c{Юрий}
																child{
																	g{Иван}
																	c{Александр}
																}
															}
															c{Лев}
															child{
																g[saint]{Михаил}
																child{
																	g{Иван}
																	child{
																		g{Александр}
																		child{
																			g{Борис}
																			c{Мария}
																			c{Михаил}
																		}
																	}
																	c{Иван}
																	c{Юрий}
																}
																c{Александр}
																child{
																	g{Василий}
																	c{Дмитрий}
																}
																c{Феодор}
																child{
																	g{Борис}
																	c{Иван}
																}
															}
															c{Феодор}
															c{Андрей}
															c{Владимир}
														}
														child{
															g{Константин}
															child{
																g{Еремей}
																c{Иван}
																c{Дмитрий}
															}
															c{Семен}
														}
														child{
															g{Василий}
															child{
																g{Михаил}
																c{Борис}
																c{Василий}
															}
															c{Василий}
														}
													}
												}
												c{Василий}
											}
											c{Владимир}
											child{
												g{Святослав}
												c{Дмитрий}
											}
											child{
												g[box={colback=green!50}]{Иоанн \\(Стародуб)}
												child[subtree box={colframe=green}]{
													g{Михаил}
													child{
														g{Иван}
														child{
															g{Феодор}
															c{Андрей}
															c{Иван}
															child{
																g{Дмитрий}
																c{Семен}
															}
														}
													}
												}
											}
										}
									}
									child{
										g{Андрей}
										child{
											g{Владимир}
											c{Андрей}
										}
										c{Ярополк}
									}
									c{Ярослав}
									c{Святополк}
								}
							}
							child{
								g[box={colback=olive!50}]{Изяслав}
								c[box={colframe=olive}]{Ярополк}
								child[subtree box={colframe=olive}]{
									g{Святополк}
									child{
										g{Ярославец}
										c{Юрий}
										c{Андрей}
									}
									child{
										g{Брячислав}
										child{
											g{Юрий}
											c{Святополк}
										}
									}
									c{Изяслав}
									child{
										g{Юрий}
										c{Глеб}
									}
								}
							}
							child{
								g{Святослав}
								child[subtree box={colframe=lime}]{
									g[box={colback=lime!50}]{Давыд}
									child{
										g{Владимир}
										c{Святослав}
									}
									c{Изяслав}
								}
								child[subtree box={colframe=violet}]{
									g[box={colback=violet!50}]{Олег}
									child{
										g{Всеволод}
										child{
											g{Ярослав}
											c{Ростислав}
											c{Ярополк}
										}
										c{Ярослав}
										child{
											g{Святослав}
											c{Владимир}
											child{
												g{Глеб}
												c{Мстислав}
											}
											child{
												g{Олег}
												c{Давыд}
											}
											child{
												g{Чермный Всеволод}
												child{
													g[saint]{Черниговский Михаил}
													child{
														g{Семен}
														c{Роман}
													}
													child{
														g{Юрий}
														child{
															g{Константин}
															c{Семен}
															c{Иван}
														}
													}
													c{Ростислав}
													child{
														g{Мстислав}
														child{
															g{Тит}
															c{Святослав}
															child{
																g{Андриан}
																c{Феодор}
															}
															c{Иван}
														}
														c{Святослав}
													}
												}
											}
											c{Мстислав}
										}
									}
									c{Игорь}
									c{Давыд}
									c{Глеб}
									child{
										g{Святослав}
										child{
											g{Олег}
											child{
												g{Святослав}
												c{Мстислав}
											}
										}
										child{
											g{Игорь}
											c{Владимир}
											c{Роман}
										}
										c{Всеволод}
									}
								}
								child[subtree box={colframe=cyan}]{
									g[box={colback=cyan!50}]{Ярослав}
									child{
										g{Ростислав}
										child{
											g{Глеб Рязанский}
											c{Роман}
											child{
												g{Игорь}
												c{Глеб}
												c{Роман}
												child{
													g{Ингвар}	
													c{Юрий}
													c{Роман}
													child{
														g{Олег}
														child{
															g[saint]{Роман}
															c{Феодор}
															child{
																g{Ярослав}
																c{Василий}
																child{
																	g{Иван}
																	child{
																		g{Иван}
																		child{
																			g{Олег}
																			c{Родослав}
																			child{
																				g{Феодор}
																				child{
																					g{Иван}
																					child{
																						g{Василий}
																						child{
																							g{Иван}
																							c{Иван}
																						}
																					}
																				}
																			}
																		}
																	}	
																}
																child{
																	g{Михаил}
																	child{
																		g{Александр}
																		c{Василий}
																		child{
																			g{Ярослав}
																			child{
																				g{Владимир}
																				c{Иван}
																			}
																		}
																	}
																}
															}
															child{
																g{Константин}
																c{Василий}
															}
														}
													}
												}
												c{Юрий}
											}
											child{
												g{Всеволод}
												c{Кир Михайло}
											}
											child{
												g{Владимир}
												c{Изяслав}
												c{Олег}
												c{Глеб}
												c{Константин}
											}
											c{Святослав}
										}
										c{Андрей}
									}
									child{
										g{Святослав}
										c{Давыд}
										c{Игорь}
										child{
											g{Владимир}
											child{
												g{Юрий}
												c{Владимир}
												child{
													g{Давыд}
													c{Юрий}
													c{Святослав}
												}
												child{
													g{Юрий}
													c{Олег}
												}
											}
										}
									}
								}
							}
							c{Владимир}
						}
						c[saint]{Борис}
						c[saint]{Глеб}
						c{Мстислав}
					}
				}
			}
		}
	}

	\genealogytree[id suffix=@m, set position=Irina@m at Irina@p]{
		child{
			g[phantom]{}
			c[id=Irina]{Ирина \\ (жена Феодора)}
			c{Царь Борис Годунов}	
		}
	}

	\genealogytree[id suffix=@n, adjust node=Sophia@n left of Sophia@p distance 16.25cm]{
		child[subtree box={colframe=orange, colback=orange!50}]{
			g{Иван Палеолог Царь}
			child{
				g{Мануил Царь}
				child{
					g{Иван Колуян Царь}
				}
				c{Дмитрий}
				child{
					g{Фома}
					c[id=Sophia]{Софья Палеолог \\(жена Ивана~III Васильевича)}
				}
				c{Константин Царь}
			}
		}
	}

	\genealogytree[id suffix=@g, adjust node=Anastasia@g left of Anastasia@p distance 22cm]{
		child[subtree box={colframe=pink, colback=pink!50}]{
			g{Камбилла Гланда Дивонович (Иван)}
			child{
				g{Андрей Кобыла}
				child{
					g{Феодор Кошка}
					child{
						g{Иван}
						child{
							g{Захарий Кошкин}
							child{
								g{Юрий}
								child{
									g{Роман}
									c[id=Anastasia]{Анастасия Романова \\(жена Ивана~IV Васильевича)}
									child{
										g{Никита}
										child{
											g{Феодор (Филарет)}
											c{Михаил Феодорович Романов Царь}
										}
									}
								}
							}
						}
					}
				}	
			}
		}
	}
\end{tikzpicture}
\end{adjustbox}
\vspace*{\fill}
\end{center}






\end{document}